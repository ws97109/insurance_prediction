<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>產品管理 - AI 保險預測系統</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'paris-blue': '#2E5CB8',
                        'paris-blue-dark': '#1E3A8A',
                        'paris-blue-light': '#60A5FA',
                        'paris-gold': '#F59E0B',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1E3A8A 0%, #2E5CB8 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .customer-type-card {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .customer-type-card:hover {
            transform: scale(1.02);
        }
        
        .customer-type-card.active {
            border: 2px solid #2E5CB8;
            background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%);
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .product-bar {
            transition: width 1s ease-out;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- 頂部導航欄 -->
    <nav class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="text-2xl font-bold">巴黎人壽</div>
                    <div class="text-sm opacity-90">AI 智能決策系統</div>
                </div>
                <div class="flex items-center space-x-6">
                    <span class="text-sm">業務員：王小華</span>
                    <button class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition">
                        登出
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主容器 -->
    <div class="flex h-[calc(100vh-72px)]">
        <!-- 左側邊欄 -->
        <aside class="w-64 bg-white shadow-lg">
            <nav class="p-4 space-y-2">
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-paris-blue-light hover:text-white transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span>儀表板</span>
                </a>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-paris-blue-light hover:text-white transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    <span>客戶管理</span>
                </a>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-paris-blue-light hover:text-white transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    <span>預測分析</span>
                </a>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg bg-paris-blue text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                    </svg>
                    <span>產品管理</span>
                </a>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-paris-blue-light hover:text-white transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                    <span>LINE 訊息</span>
                </a>
            </nav>
        </aside>

        <!-- 主內容區 -->
        <main class="flex-1 overflow-y-auto">
            <div class="container mx-auto p-6">
                <!-- 頁面標題 -->
                <div class="mb-6">
                    <h1 class="text-3xl font-bold text-gray-800">產品管理</h1>
                    <p class="text-gray-600 mt-2">透過客群分析，找出最佳產品推薦策略</p>
                </div>

                <!-- 分頁切換 -->
                <div class="flex space-x-2 mb-6">
                    <button onclick="switchTab('segment')" id="segmentTab" class="px-6 py-3 bg-paris-blue text-white rounded-t-lg font-medium transition">
                        📊 客群分析
                    </button>
                    <button onclick="switchTab('similar')" id="similarTab" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-t-lg font-medium hover:bg-gray-300 transition">
                        🎯 相似客戶推薦
                    </button>
                </div>

                <!-- Tab 1: 客群分析 -->
                <div id="segmentContent" class="space-y-6">
                    <!-- 客群總覽 -->
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-gray-800">客群總覽</h2>
                            <div class="flex items-center space-x-2 text-sm text-gray-600">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                    <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                                </svg>
                                <span>資料更新時間：2025/10/29 09:00</span>
                            </div>
                        </div>

                        <!-- 客群類型卡片 -->
                        <div class="grid grid-cols-3 gap-6">
                            <!-- 保守型客群 -->
                            <div class="customer-type-card border-2 border-gray-200 rounded-xl p-6 bg-white" onclick="selectCustomerType('conservative')">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                            </svg>
                                        </div>
                                        <div>
                                            <h3 class="text-lg font-bold text-gray-800">保守型</h3>
                                            <p class="text-sm text-gray-600">低風險偏好</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">客戶數量</span>
                                        <span class="font-semibold text-gray-800">42 位</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">平均年齡</span>
                                        <span class="font-semibold text-gray-800">48 歲</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">平均年收入</span>
                                        <span class="font-semibold text-gray-800">85 萬</span>
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t">
                                    <p class="text-xs text-gray-500 mb-2">最受歡迎產品 Top 3</p>
                                    <div class="space-y-1">
                                        <div class="flex items-center text-xs">
                                            <span class="text-green-600 mr-1">🥇</span>
                                            <span class="text-gray-700">終身壽險</span>
                                            <span class="ml-auto text-gray-500">76%</span>
                                        </div>
                                        <div class="flex items-center text-xs">
                                            <span class="text-gray-400 mr-1">🥈</span>
                                            <span class="text-gray-700">醫療險</span>
                                            <span class="ml-auto text-gray-500">68%</span>
                                        </div>
                                        <div class="flex items-center text-xs">
                                            <span class="text-orange-400 mr-1">🥉</span>
                                            <span class="text-gray-700">年金保險</span>
                                            <span class="ml-auto text-gray-500">54%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 平衡型客群 -->
                            <div class="customer-type-card border-2 border-gray-200 rounded-xl p-6 bg-white" onclick="selectCustomerType('balanced')">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"></path>
                                            </svg>
                                        </div>
                                        <div>
                                            <h3 class="text-lg font-bold text-gray-800">平衡型</h3>
                                            <p class="text-sm text-gray-600">中等風險偏好</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">客戶數量</span>
                                        <span class="font-semibold text-gray-800">53 位</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">平均年齡</span>
                                        <span class="font-semibold text-gray-800">38 歲</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">平均年收入</span>
                                        <span class="font-semibold text-gray-800">120 萬</span>
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t">
                                    <p class="text-xs text-gray-500 mb-2">最受歡迎產品 Top 3</p>
                                    <div class="space-y-1">
                                        <div class="flex items-center text-xs">
                                            <span class="text-green-600 mr-1">🥇</span>
                                            <span class="text-gray-700">變額萬能壽險</span>
                                            <span class="ml-auto text-gray-500">82%</span>
                                        </div>
                                        <div class="flex items-center text-xs">
                                            <span class="text-gray-400 mr-1">🥈</span>
                                            <span class="text-gray-700">變額年金保險</span>
                                            <span class="ml-auto text-gray-500">71%</span>
                                        </div>
                                        <div class="flex items-center text-xs">
                                            <span class="text-orange-400 mr-1">🥉</span>
                                            <span class="text-gray-700">子女教育金</span>
                                            <span class="ml-auto text-gray-500">63%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 積極型客群 -->
                            <div class="customer-type-card border-2 border-gray-200 rounded-xl p-6 bg-white" onclick="selectCustomerType('aggressive')">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-3">
                                            <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                                            </svg>
                                        </div>
                                        <div>
                                            <h3 class="text-lg font-bold text-gray-800">積極型</h3>
                                            <p class="text-sm text-gray-600">高風險偏好</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">客戶數量</span>
                                        <span class="font-semibold text-gray-800">32 位</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">平均年齡</span>
                                        <span class="font-semibold text-gray-800">35 歲</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">平均年收入</span>
                                        <span class="font-semibold text-gray-800">180 萬</span>
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t">
                                    <p class="text-xs text-gray-500 mb-2">最受歡迎產品 Top 3</p>
                                    <div class="space-y-1">
                                        <div class="flex items-center text-xs">
                                            <span class="text-green-600 mr-1">🥇</span>
                                            <span class="text-gray-700">投資型壽險</span>
                                            <span class="ml-auto text-gray-500">88%</span>
                                        </div>
                                        <div class="flex items-center text-xs">
                                            <span class="text-gray-400 mr-1">🥈</span>
                                            <span class="text-gray-700">連結式保單</span>
                                            <span class="ml-auto text-gray-500">79%</span>
                                        </div>
                                        <div class="flex items-center text-xs">
                                            <span class="text-orange-400 mr-1">🥉</span>
                                            <span class="text-gray-700">變額萬能壽險</span>
                                            <span class="ml-auto text-gray-500">65%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 詳細產品分析（選擇客群後顯示） -->
                    <div id="detailedAnalysis" class="bg-white rounded-xl shadow-md p-6 card-hover slide-in" style="display: none;">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold text-gray-800 flex items-center">
                                <span id="selectedTypeIcon" class="mr-2"></span>
                                <span id="selectedTypeName"></span> - 產品偏好分析
                            </h2>
                            <button onclick="closeDetailedAnalysis()" class="text-gray-500 hover:text-gray-700">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>

                        <div class="grid grid-cols-2 gap-6">
                            <!-- 左側：產品購買率排名 -->
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">產品購買率排名（Top 10）</h3>
                                <div class="space-y-3" id="productRankingList">
                                    <!-- 動態生成 -->
                                </div>
                            </div>

                            <!-- 右側：客群特徵與推薦建議 -->
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">客群特徵分析</h3>
                                <div class="bg-blue-50 rounded-lg p-4 mb-4">
                                    <h4 class="font-semibold text-blue-900 mb-2">主要特徵</h4>
                                    <ul class="text-sm text-blue-800 space-y-1" id="customerCharacteristics">
                                        <!-- 動態生成 -->
                                    </ul>
                                </div>

                                <h3 class="text-lg font-semibold text-gray-800 mb-4">AI 推薦策略</h3>
                                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200">
                                    <div class="flex items-start">
                                        <svg class="w-5 h-5 text-purple-600 mt-0.5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                        </svg>
                                        <div id="recommendationStrategy" class="text-sm text-gray-700">
                                            <!-- 動態生成 -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: 相似客戶推薦 -->
                <div id="similarContent" class="space-y-6" style="display: none;">
                    <!-- 客戶選擇區 -->
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">步驟 1：選擇目標客戶</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">客戶姓名</label>
                                <select id="targetCustomer" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-paris-blue focus:border-transparent" onchange="selectTargetCustomer()">
                                    <option value="">請選擇客戶</option>
                                    <option value="customer1">王大明 - 35歲, 平衡型</option>
                                    <option value="customer2">李小華 - 42歲, 保守型</option>
                                    <option value="customer3">陳美玲 - 38歲, 平衡型</option>
                                    <option value="customer4">張志明 - 30歲, 積極型</option>
                                    <option value="customer5">林雅婷 - 45歲, 保守型</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">相似度門檻</label>
                                <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-paris-blue focus:border-transparent">
                                    <option value="80">80% 以上（極度相似）</option>
                                    <option value="70" selected>70% 以上（高度相似）</option>
                                    <option value="60">60% 以上（中度相似）</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 目標客戶資訊 -->
                    <div id="targetCustomerInfo" class="bg-white rounded-xl shadow-md p-6 card-hover fade-in" style="display: none;">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">目標客戶資訊</h2>
                        <div class="grid grid-cols-4 gap-4">
                            <div class="bg-blue-50 rounded-lg p-4">
                                <p class="text-sm text-gray-600 mb-1">風險類型</p>
                                <p class="text-lg font-bold text-paris-blue" id="targetRiskType">平衡型</p>
                            </div>
                            <div class="bg-green-50 rounded-lg p-4">
                                <p class="text-sm text-gray-600 mb-1">年齡</p>
                                <p class="text-lg font-bold text-green-700" id="targetAge">35 歲</p>
                            </div>
                            <div class="bg-purple-50 rounded-lg p-4">
                                <p class="text-sm text-gray-600 mb-1">年收入</p>
                                <p class="text-lg font-bold text-purple-700" id="targetIncome">120 萬</p>
                            </div>
                            <div class="bg-yellow-50 rounded-lg p-4">
                                <p class="text-sm text-gray-600 mb-1">現有保單</p>
                                <p class="text-lg font-bold text-yellow-700" id="targetPolicies">2 份</p>
                            </div>
                        </div>
                    </div>

                    <!-- 相似客戶列表與產品推薦 -->
                    <div id="similarCustomersResult" class="grid grid-cols-2 gap-6" style="display: none;">
                        <!-- 左側：相似客戶列表 -->
                        <div class="bg-white rounded-xl shadow-md p-6 card-hover slide-in">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4">找到 8 位相似客戶</h2>
                            <div class="space-y-3 max-h-[600px] overflow-y-auto">
                                <!-- 相似客戶 1 -->
                                <div class="border rounded-lg p-4 hover:bg-gray-50 transition">
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-paris-blue rounded-full flex items-center justify-center text-white font-semibold mr-3">
                                                劉
                                            </div>
                                            <div>
                                                <h4 class="font-semibold text-gray-800">劉志偉</h4>
                                                <p class="text-xs text-gray-600">36歲 • 年收入 130萬</p>
                                            </div>
                                        </div>
                                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium">89% 相似</span>
                                    </div>
                                    <div class="text-xs text-gray-600 space-y-1">
                                        <p>✓ 已購買：終身壽險、醫療險</p>
                                        <p class="text-purple-600 font-medium">→ 後續加保：變額萬能壽險</p>
                                    </div>
                                </div>

                                <!-- 相似客戶 2 -->
                                <div class="border rounded-lg p-4 hover:bg-gray-50 transition">
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center text-white font-semibold mr-3">
                                                黃
                                            </div>
                                            <div>
                                                <h4 class="font-semibold text-gray-800">黃淑芬</h4>
                                                <p class="text-xs text-gray-600">34歲 • 年收入 115萬</p>
                                            </div>
                                        </div>
                                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium">85% 相似</span>
                                    </div>
                                    <div class="text-xs text-gray-600 space-y-1">
                                        <p>✓ 已購買：醫療險</p>
                                        <p class="text-purple-600 font-medium">→ 後續加保：變額萬能壽險、年金保險</p>
                                    </div>
                                </div>

                                <!-- 相似客戶 3 -->
                                <div class="border rounded-lg p-4 hover:bg-gray-50 transition">
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-semibold mr-3">
                                                吳
                                            </div>
                                            <div>
                                                <h4 class="font-semibold text-gray-800">吳建國</h4>
                                                <p class="text-xs text-gray-600">37歲 • 年收入 125萬</p>
                                            </div>
                                        </div>
                                        <span class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-medium">78% 相似</span>
                                    </div>
                                    <div class="text-xs text-gray-600 space-y-1">
                                        <p>✓ 已購買：終身壽險</p>
                                        <p class="text-purple-600 font-medium">→ 後續加保：子女教育金、醫療險</p>
                                    </div>
                                </div>

                                <!-- 更多相似客戶... -->
                                <div class="text-center py-2">
                                    <button class="text-sm text-paris-blue hover:underline">查看更多 5 位 →</button>
                                </div>
                            </div>
                        </div>

                        <!-- 右側：推薦產品與話術生成 -->
                        <div class="space-y-6">
                            <!-- 推薦產品統計 -->
                            <div class="bg-white rounded-xl shadow-md p-6 card-hover slide-in">
                                <h2 class="text-xl font-semibold text-gray-800 mb-4">相似客戶最常購買的產品</h2>
                                <p class="text-sm text-gray-600 mb-4">基於 8 位相似客戶的購買行為分析</p>
                                
                                <div class="space-y-4">
                                    <!-- 產品 1 -->
                                    <div class="border-l-4 border-paris-gold bg-gradient-to-r from-yellow-50 to-white p-4 rounded-r-lg">
                                        <div class="flex items-center justify-between mb-2">
                                            <h4 class="font-semibold text-gray-800 flex items-center">
                                                <span class="text-xl mr-2">🥇</span>
                                                變額萬能壽險 A
                                            </h4>
                                            <span class="px-3 py-1 bg-paris-gold text-white rounded-full text-sm font-medium">75%</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">6 位相似客戶購買</p>
                                        <div class="w-full bg-gray-200 rounded-full h-2 mb-3">
                                            <div class="product-bar bg-paris-gold h-2 rounded-full" style="width: 75%"></div>
                                        </div>
                                        <button onclick="generateScript('變額萬能壽險 A')" class="w-full bg-paris-blue text-white py-2 rounded-lg text-sm hover:opacity-90 transition">
                                            📝 生成推薦話術
                                        </button>
                                    </div>

                                    <!-- 產品 2 -->
                                    <div class="border-l-4 border-gray-400 bg-gradient-to-r from-gray-50 to-white p-4 rounded-r-lg">
                                        <div class="flex items-center justify-between mb-2">
                                            <h4 class="font-semibold text-gray-800 flex items-center">
                                                <span class="text-xl mr-2">🥈</span>
                                                變額年金保險
                                            </h4>
                                            <span class="px-3 py-1 bg-gray-400 text-white rounded-full text-sm font-medium">50%</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">4 位相似客戶購買</p>
                                        <div class="w-full bg-gray-200 rounded-full h-2 mb-3">
                                            <div class="product-bar bg-gray-500 h-2 rounded-full" style="width: 50%"></div>
                                        </div>
                                        <button onclick="generateScript('變額年金保險')" class="w-full bg-gray-600 text-white py-2 rounded-lg text-sm hover:opacity-90 transition">
                                            📝 生成推薦話術
                                        </button>
                                    </div>

                                    <!-- 產品 3 -->
                                    <div class="border-l-4 border-orange-400 bg-gradient-to-r from-orange-50 to-white p-4 rounded-r-lg">
                                        <div class="flex items-center justify-between mb-2">
                                            <h4 class="font-semibold text-gray-800 flex items-center">
                                                <span class="text-xl mr-2">🥉</span>
                                                子女教育金保險
                                            </h4>
                                            <span class="px-3 py-1 bg-orange-400 text-white rounded-full text-sm font-medium">38%</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">3 位相似客戶購買</p>
                                        <div class="w-full bg-gray-200 rounded-full h-2 mb-3">
                                            <div class="product-bar bg-orange-400 h-2 rounded-full" style="width: 38%"></div>
                                        </div>
                                        <button onclick="generateScript('子女教育金保險')" class="w-full bg-orange-500 text-white py-2 rounded-lg text-sm hover:opacity-90 transition">
                                            📝 生成推薦話術
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- AI 生成的推薦話術 -->
                            <div id="generatedScript" class="bg-white rounded-xl shadow-md p-6 card-hover fade-in" style="display: none;">
                                <div class="flex items-center justify-between mb-4">
                                    <h2 class="text-xl font-semibold text-gray-800 flex items-center">
                                        <svg class="w-6 h-6 mr-2 text-paris-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                                        </svg>
                                        AI 生成推薦話術
                                    </h2>
                                    <button onclick="closeScript()" class="text-gray-500 hover:text-gray-700">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                        </svg>
                                    </button>
                                </div>

                                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-5 border border-blue-200">
                                    <div class="flex items-start mb-3">
                                        <div class="bg-paris-blue text-white rounded-full p-2 mr-3">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                            </svg>
                                        </div>
                                        <div class="flex-1">
                                            <div class="flex items-center justify-between mb-2">
                                                <span class="text-sm font-medium text-gray-700" id="scriptProductName">針對變額萬能壽險 A</span>
                                                <span class="text-xs text-gray-500">基於相似客戶成功案例</span>
                                            </div>
                                            <div class="bg-white rounded-lg p-4 shadow-sm">
                                                <p class="text-gray-800 leading-relaxed mb-3">
                                                    <span class="font-semibold">王先生您好：</span><br><br>
                                                    我注意到像您這樣的客戶，有 <span class="font-semibold text-paris-blue">75% 都選擇了變額萬能壽險</span>。他們選擇這個產品的原因很相似：
                                                </p>
                                                <div class="space-y-2 mb-3 bg-blue-50 p-3 rounded">
                                                    <p class="text-sm">💰 <span class="font-semibold">彈性繳費：</span>可依收入調整，平均年繳 12 萬</p>
                                                    <p class="text-sm">📈 <span class="font-semibold">穩健增值：</span>過去 5 年平均報酬 6.8%</p>
                                                    <p class="text-sm">🎯 <span class="font-semibold">退休規劃：</span>60 歲預估可累積 850 萬</p>
                                                </div>
                                                <div class="bg-green-50 p-3 rounded mb-3">
                                                    <p class="text-sm font-semibold text-green-800 mb-1">✓ 成功案例分享</p>
                                                    <p class="text-xs text-green-700">劉先生（36歲，工程師）去年投保後，今年已獲得 7.2% 的投資報酬，他說這是最適合像我們這種收入穩定的上班族的選擇。</p>
                                                </div>
                                                <p class="text-gray-700 text-sm">
                                                    您方便的話，我可以為您準備更詳細的試算報告，讓您看看這份保單如何幫助您達成理財目標。
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="flex items-center justify-between mt-4 pt-4 border-t border-blue-200">
                                        <div class="flex items-center space-x-2 text-sm text-gray-600">
                                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                            </svg>
                                            <span>基於 6 位成功案例生成</span>
                                        </div>
                                        <div class="flex space-x-2">
                                            <button class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50 transition">
                                                ✏️ 編輯
                                            </button>
                                            <button class="px-4 py-2 bg-paris-blue text-white rounded-lg text-sm hover:opacity-90 transition">
                                                📋 複製話術
                                            </button>
                                            <button class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm hover:opacity-90 transition">
                                                💬 發送至 LINE
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // 切換分頁
        function switchTab(tab) {
            if (tab === 'segment') {
                document.getElementById('segmentTab').className = 'px-6 py-3 bg-paris-blue text-white rounded-t-lg font-medium transition';
                document.getElementById('similarTab').className = 'px-6 py-3 bg-gray-200 text-gray-700 rounded-t-lg font-medium hover:bg-gray-300 transition';
                document.getElementById('segmentContent').style.display = 'block';
                document.getElementById('similarContent').style.display = 'none';
            } else {
                document.getElementById('segmentTab').className = 'px-6 py-3 bg-gray-200 text-gray-700 rounded-t-lg font-medium hover:bg-gray-300 transition';
                document.getElementById('similarTab').className = 'px-6 py-3 bg-paris-blue text-white rounded-t-lg font-medium transition';
                document.getElementById('segmentContent').style.display = 'none';
                document.getElementById('similarContent').style.display = 'block';
            }
        }

        // 選擇客群類型
        function selectCustomerType(type) {
            // 移除所有 active
            document.querySelectorAll('.customer-type-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // 添加 active 到選中的卡片
            event.currentTarget.classList.add('active');
            
            // 顯示詳細分析
            const detailedAnalysis = document.getElementById('detailedAnalysis');
            detailedAnalysis.style.display = 'block';
            
            // 根據類型顯示不同內容
            const typeData = {
                'conservative': {
                    icon: '🛡️',
                    name: '保守型客群',
                    products: [
                        { name: '終身壽險', rate: 76 },
                        { name: '醫療險', rate: 68 },
                        { name: '年金保險', rate: 54 },
                        { name: '儲蓄型保險', rate: 48 },
                        { name: '長期照護險', rate: 42 },
                        { name: '實物給付醫療險', rate: 38 },
                        { name: '定期壽險', rate: 32 },
                        { name: '癌症險', rate: 28 },
                        { name: '意外險', rate: 24 },
                        { name: '旅平險', rate: 18 }
                    ],
                    characteristics: [
                        '重視保障勝過投資報酬',
                        '傾向選擇保費固定的產品',
                        '偏好有保證給付的保險',
                        '平均持有 3-4 份保單',
                        '決策時間較長（平均 2-3 週）'
                    ],
                    strategy: '建議採用「安全感」訴求，強調保障的完整性和長期穩定性。可以用「安心退休」、「守護家人」等情感訴求，並提供詳細的保障範圍說明。'
                },
                'balanced': {
                    icon: '⚖️',
                    name: '平衡型客群',
                    products: [
                        { name: '變額萬能壽險', rate: 82 },
                        { name: '變額年金保險', rate: 71 },
                        { name: '子女教育金', rate: 63 },
                        { name: '利變型壽險', rate: 58 },
                        { name: '醫療險', rate: 52 },
                        { name: '投資型保單', rate: 46 },
                        { name: '終身壽險', rate: 41 },
                        { name: '年金保險', rate: 37 },
                        { name: '長照險', rate: 29 },
                        { name: '意外險', rate: 22 }
                    ],
                    characteristics: [
                        '追求保障與投資的平衡',
                        '願意接受中等風險',
                        '重視產品的彈性與靈活度',
                        '平均持有 2-3 份保單',
                        '決策時間適中（平均 1-2 週）'
                    ],
                    strategy: '建議採用「雙贏策略」訴求，同時強調保障和增值潛力。可以提供具體的投資報酬試算，並說明風險控制機制，讓客戶感到安心。'
                },
                'aggressive': {
                    icon: '🚀',
                    name: '積極型客群',
                    products: [
                        { name: '投資型壽險', rate: 88 },
                        { name: '連結式保單', rate: 79 },
                        { name: '變額萬能壽險', rate: 65 },
                        { name: '變額年金', rate: 58 },
                        { name: '外幣保單', rate: 51 },
                        { name: '類全委保單', rate: 44 },
                        { name: '目標到期保單', rate: 38 },
                        { name: '利變型壽險', rate: 31 },
                        { name: '醫療險', rate: 25 },
                        { name: '終身壽險', rate: 18 }
                    ],
                    characteristics: [
                        '追求高報酬率',
                        '風險承受度高',
                        '偏好投資連結型產品',
                        '平均持有 1-2 份保單',
                        '決策迅速（平均 3-7 天）'
                    ],
                    strategy: '建議採用「投資機會」訴求，強調產品的報酬潛力和市場優勢。可以分享成功案例和歷史績效，並提供多元的投資標的選擇。'
                }
            };
            
            const data = typeData[type];
            document.getElementById('selectedTypeIcon').textContent = data.icon;
            document.getElementById('selectedTypeName').textContent = data.name;
            
            // 生成產品排名
            const rankingList = document.getElementById('productRankingList');
            rankingList.innerHTML = data.products.map((product, index) => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                    <div class="flex items-center flex-1">
                        <span class="font-semibold text-gray-500 mr-3 w-6">${index + 1}</span>
                        <span class="text-sm text-gray-800">${product.name}</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-32 bg-gray-200 rounded-full h-2 mr-3">
                            <div class="product-bar bg-paris-blue h-2 rounded-full" style="width: ${product.rate}%"></div>
                        </div>
                        <span class="text-sm font-semibold text-paris-blue w-12 text-right">${product.rate}%</span>
                    </div>
                </div>
            `).join('');
            
            // 生成特徵
            const characteristics = document.getElementById('customerCharacteristics');
            characteristics.innerHTML = data.characteristics.map(char => `<li>• ${char}</li>`).join('');
            
            // 生成策略
            document.getElementById('recommendationStrategy').textContent = data.strategy;
            
            // 滾動到詳細分析
            setTimeout(() => {
                detailedAnalysis.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        // 關閉詳細分析
        function closeDetailedAnalysis() {
            document.getElementById('detailedAnalysis').style.display = 'none';
            document.querySelectorAll('.customer-type-card').forEach(card => {
                card.classList.remove('active');
            });
        }

        // 選擇目標客戶
        function selectTargetCustomer() {
            const select = document.getElementById('targetCustomer');
            if (select.value) {
                document.getElementById('targetCustomerInfo').style.display = 'block';
                document.getElementById('similarCustomersResult').style.display = 'grid';
            } else {
                document.getElementById('targetCustomerInfo').style.display = 'none';
                document.getElementById('similarCustomersResult').style.display = 'none';
            }
        }

        // 生成推薦話術
        function generateScript(productName) {
            const scriptDiv = document.getElementById('generatedScript');
            document.getElementById('scriptProductName').textContent = `針對${productName}`;
            scriptDiv.style.display = 'block';
            
            // 滾動到話術
            setTimeout(() => {
                scriptDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        // 關閉話術
        function closeScript() {
            document.getElementById('generatedScript').style.display = 'none';
        }
    </script>
</body>
</html>