<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>個性化分析 - 巴黎人壽客戶服務</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'paris-blue': '#2E5CB8',
                        'paris-blue-dark': '#1E3A8A',
                        'paris-blue-light': '#60A5FA',
                        'paris-gold': '#F59E0B',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1E3A8A 0%, #2E5CB8 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .option-card {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .option-card:hover {
            transform: scale(1.02);
        }
        
        .option-card.selected {
            border-color: #2E5CB8;
            background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%);
        }
        
        .progress-bar {
            transition: width 0.5s ease;
        }
        
        .pulse-dot {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .slide-up {
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .celebration {
            animation: celebration 0.6s ease-out;
        }
        
        @keyframes celebration {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- 頂部導航欄 -->
    <nav class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="text-2xl font-bold">巴黎人壽</div>
                    <div class="text-sm opacity-90">客戶服務平台</div>
                </div>
                <div class="flex items-center space-x-6">
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center">
                            <span class="text-sm font-semibold">王</span>
                        </div>
                        <span class="text-sm">王大明</span>
                    </div>
                    <button class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition text-sm">
                        登出
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主容器 -->
    <div class="flex h-[calc(100vh-72px)]">
        <!-- 左側邊欄 -->
        <aside class="w-64 bg-white shadow-lg">
            <nav class="p-4 space-y-2">
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-paris-blue-light hover:text-white transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span>我的保單</span>
                </a>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-paris-blue-light hover:text-white transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <span>理賠申請</span>
                </a>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg bg-paris-blue text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    <span>個性化分析</span>
                </a>
                <a href="#" class="flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-paris-blue-light hover:text-white transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span>個人資料</span>
                </a>
            </nav>

            <!-- 測評狀態 -->
            <div class="p-4 mt-6">
                <div id="assessmentStatus" class="bg-yellow-50 rounded-lg p-4 border border-yellow-200">
                    <h3 class="text-sm font-semibold text-yellow-900 mb-2 flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        測評狀態
                    </h3>
                    <p class="text-xs text-yellow-800">尚未完成心理測評</p>
                    <button onclick="startAssessment()" class="mt-2 w-full bg-yellow-500 text-white py-2 rounded text-xs hover:bg-yellow-600 transition">
                        立即開始
                    </button>
                </div>
            </div>
        </aside>

        <!-- 主內容區 -->
        <main class="flex-1 overflow-y-auto">
            <!-- 初次進入：問卷引導 -->
            <div id="welcomeView" class="h-full flex items-center justify-center p-6">
                <div class="max-w-2xl mx-auto text-center">
                    <div class="bg-white rounded-2xl shadow-xl p-12">
                        <div class="w-20 h-20 bg-paris-blue rounded-full flex items-center justify-center mx-auto mb-6">
                            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h1 class="text-3xl font-bold text-gray-800 mb-4">歡迎！讓我們更了解您</h1>
                        <p class="text-gray-600 mb-8 leading-relaxed">
                            完成這份簡短的心理測評（約 10 分鐘），我們將為您提供：<br>
                            ✓ 個人化的保險產品推薦<br>
                            ✓ 符合您偏好的溝通方式<br>
                            ✓ 量身打造的理財建議
                        </p>
                        <div class="bg-blue-50 rounded-lg p-4 mb-8 text-left">
                            <h3 class="font-semibold text-gray-800 mb-2">測評包含：</h3>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>• 風險偏好評估（8 題）</li>
                                <li>• 理財目標分析（6 題）</li>
                                <li>• 投資經驗調查（5 題）</li>
                                <li>• 人格特質測試（6 題）</li>
                                <li>• 溝通偏好分析（5 題）</li>
                            </ul>
                            <p class="text-xs text-gray-500 mt-3">共 30 題，預計 10 分鐘完成</p>
                        </div>
                        <button onclick="startAssessment()" class="gradient-bg text-white px-8 py-4 rounded-lg text-lg font-semibold hover:opacity-90 transition shadow-lg">
                            開始測評
                        </button>
                        <p class="text-xs text-gray-500 mt-4">您的資料將受到完善保護，僅用於提供更好的服務</p>
                    </div>
                </div>
            </div>

            <!-- 問卷進行中 -->
            <div id="assessmentView" class="p-6" style="display: none;">
                <div class="max-w-4xl mx-auto">
                    <!-- 進度條 -->
                    <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <h2 class="text-lg font-semibold text-gray-800" id="sectionTitle">風險偏好評估</h2>
                            <span class="text-sm text-gray-500" id="progressText">第 1 題，共 30 題</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div id="progressBar" class="progress-bar bg-paris-blue h-3 rounded-full" style="width: 3%"></div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">已完成 <span id="progressPercent">3</span>%</p>
                    </div>

                    <!-- 問題卡片 -->
                    <div id="questionCard" class="bg-white rounded-xl shadow-md p-8 slide-up">
                        <!-- 問題內容動態生成 -->
                    </div>

                    <!-- 導航按鈕 -->
                    <div class="flex justify-between mt-6">
                        <button id="prevBtn" onclick="previousQuestion()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition" disabled>
                            上一題
                        </button>
                        <button id="nextBtn" onclick="nextQuestion()" class="px-6 py-3 bg-paris-blue text-white rounded-lg font-medium hover:opacity-90 transition" disabled>
                            下一題
                        </button>
                    </div>
                </div>
            </div>

            <!-- 分析結果 -->
            <div id="resultView" class="p-6" style="display: none;">
                <div class="max-w-5xl mx-auto">
                    <!-- 完成慶祝 -->
                    <div class="bg-white rounded-xl shadow-md p-8 mb-6 text-center celebration">
                        <div class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">測評完成！</h1>
                        <p class="text-gray-600">感謝您的耐心填寫，以下是您的個性化分析結果</p>
                    </div>

                    <!-- 分析結果總覽 -->
                    <div class="grid grid-cols-3 gap-6 mb-6">
                        <!-- 風險類型 -->
                        <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-semibold text-gray-800">風險偏好</h3>
                                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"></path>
                                    </svg>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-yellow-600 mb-2">平衡型</p>
                            <p class="text-sm text-gray-600">中等風險承受度，追求穩健增值</p>
                        </div>

                        <!-- MBTI -->
                        <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-semibold text-gray-800">人格特質</h3>
                                <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                    </svg>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-purple-600 mb-2">ISTJ 型</p>
                            <p class="text-sm text-gray-600">務實、重視細節、喜歡數據</p>
                        </div>

                        <!-- 理財目標 -->
                        <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-semibold text-gray-800">主要目標</h3>
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                                    </svg>
                                </div>
                            </div>
                            <p class="text-lg font-bold text-blue-600 mb-2">退休規劃</p>
                            <p class="text-sm text-gray-600">次要：子女教育、財富增值</p>
                        </div>
                    </div>

                    <!-- 詳細分析 -->
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <!-- 左側：風險分析 -->
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4">風險偏好分析</h2>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between mb-2">
                                        <span class="text-sm text-gray-600">保守程度</span>
                                        <span class="text-sm font-semibold">40%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 40%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between mb-2">
                                        <span class="text-sm text-gray-600">平衡程度</span>
                                        <span class="text-sm font-semibold">60%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 60%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between mb-2">
                                        <span class="text-sm text-gray-600">積極程度</span>
                                        <span class="text-sm font-semibold">25%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-red-500 h-2 rounded-full" style="width: 25%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4 p-4 bg-yellow-50 rounded-lg">
                                <p class="text-sm text-gray-700">您屬於<span class="font-semibold text-yellow-700">平衡型投資者</span>，適合穩健增值的投資型保險產品。</p>
                            </div>
                        </div>

                        <!-- 右側：溝通偏好 -->
                        <div class="bg-white rounded-xl shadow-md p-6">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4">溝通偏好分析</h2>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between mb-2">
                                        <span class="text-sm text-gray-600">數據導向</span>
                                        <span class="text-sm font-semibold">85%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-paris-blue h-2 rounded-full" style="width: 85%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between mb-2">
                                        <span class="text-sm text-gray-600">視覺圖表</span>
                                        <span class="text-sm font-semibold">70%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-purple-500 h-2 rounded-full" style="width: 70%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between mb-2">
                                        <span class="text-sm text-gray-600">故事情感</span>
                                        <span class="text-sm font-semibold">45%</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-pink-500 h-2 rounded-full" style="width: 45%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                                <p class="text-sm text-gray-700">我們會為您提供<span class="font-semibold text-blue-700">數據化、圖表化</span>的資訊，讓您更容易理解。</p>
                            </div>
                        </div>
                    </div>

                    <!-- AI 推薦產品 -->
                    <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <svg class="w-6 h-6 mr-2 text-paris-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            根據您的特質，我們推薦以下產品
                        </h2>
                        
                        <div class="grid grid-cols-3 gap-4">
                            <!-- 推薦產品 1 -->
                            <div class="border-2 border-paris-gold rounded-lg p-4 bg-gradient-to-br from-yellow-50 to-white">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-2xl">🥇</span>
                                    <span class="px-3 py-1 bg-paris-gold text-white rounded-full text-xs font-medium">87% 匹配</span>
                                </div>
                                <h3 class="font-bold text-gray-800 mb-2">變額萬能壽險 A</h3>
                                <p class="text-xs text-gray-600 mb-3">彈性繳費 | 穩健增值 | 退休規劃</p>
                                <div class="text-xs text-gray-700 space-y-1 mb-3">
                                    <p>✓ 符合您的平衡型投資風格</p>
                                    <p>✓ 過去 5 年平均報酬 6.8%</p>
                                </div>
                                <button class="w-full bg-paris-gold text-white py-2 rounded text-sm hover:opacity-90 transition">
                                    了解更多
                                </button>
                            </div>

                            <!-- 推薦產品 2 -->
                            <div class="border-2 border-gray-300 rounded-lg p-4 bg-gradient-to-br from-gray-50 to-white">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-2xl">🥈</span>
                                    <span class="px-3 py-1 bg-gray-400 text-white rounded-full text-xs font-medium">76% 匹配</span>
                                </div>
                                <h3 class="font-bold text-gray-800 mb-2">變額年金保險</h3>
                                <p class="text-xs text-gray-600 mb-3">退休給付 | 投資理財 | 穩定收益</p>
                                <div class="text-xs text-gray-700 space-y-1 mb-3">
                                    <p>✓ 高度契合退休規劃目標</p>
                                    <p>✓ 提供穩定年金給付</p>
                                </div>
                                <button class="w-full bg-gray-600 text-white py-2 rounded text-sm hover:opacity-90 transition">
                                    了解更多
                                </button>
                            </div>

                            <!-- 推薦產品 3 -->
                            <div class="border-2 border-orange-300 rounded-lg p-4 bg-gradient-to-br from-orange-50 to-white">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-2xl">🥉</span>
                                    <span class="px-3 py-1 bg-orange-400 text-white rounded-full text-xs font-medium">68% 匹配</span>
                                </div>
                                <h3 class="font-bold text-gray-800 mb-2">利變型終身壽險</h3>
                                <p class="text-xs text-gray-600 mb-3">終身保障 | 穩健增值 | 資產傳承</p>
                                <div class="text-xs text-gray-700 space-y-1 mb-3">
                                    <p>✓ 提供長期穩定保障</p>
                                    <p>✓ 利率變動機制靈活</p>
                                </div>
                                <button class="w-full bg-orange-500 text-white py-2 rounded text-sm hover:opacity-90 transition">
                                    了解更多
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- AI 個性化建議 -->
                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <svg class="w-6 h-6 mr-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                            給您的專屬建議
                        </h2>
                        <div class="bg-white rounded-lg p-5 space-y-3">
                            <div class="flex items-start">
                                <span class="text-purple-600 font-bold mr-3">1.</span>
                                <p class="text-sm text-gray-700">建議每年投入年收入的 <span class="font-semibold text-purple-700">10-15%</span> 用於退休規劃，以您的收入水平，約 12-18 萬元最為適合。</p>
                            </div>
                            <div class="flex items-start">
                                <span class="text-purple-600 font-bold mr-3">2.</span>
                                <p class="text-sm text-gray-700">您偏好數據分析，建議定期（每季）檢視投資績效，並根據市場狀況調整配置。</p>
                            </div>
                            <div class="flex items-start">
                                <span class="text-purple-600 font-bold mr-3">3.</span>
                                <p class="text-sm text-gray-700">由於您是 ISTJ 型人格，建議選擇<span class="font-semibold text-purple-700">規則明確、保障完整</span>的保險產品，避免過於複雜的金融商品。</p>
                            </div>
                        </div>
                    </div>

                    <!-- 操作按鈕 -->
                    <div class="flex space-x-4 mt-6">
                        <button onclick="retakeAssessment()" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-300 transition">
                            重新測評
                        </button>
                        <button onclick="contactAdvisor()" class="flex-1 gradient-bg text-white py-3 rounded-lg font-medium hover:opacity-90 transition">
                            聯繫專屬顧問
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- 右側 AI 助手 -->
        <aside class="w-96 bg-white shadow-lg border-l border-gray-200 flex flex-col">
            <!-- 助手標題 -->
            <div class="gradient-bg text-white p-4 flex items-center justify-between">
                <div class="flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                    </svg>
                    <span class="font-semibold">AI 理財顧問</span>
                    <span class="ml-2 pulse-dot w-2 h-2 bg-green-400 rounded-full"></span>
                </div>
            </div>

            <!-- 對話區域 -->
            <div class="flex-1 overflow-y-auto p-4 space-y-4" id="chatMessages">
                <div class="bg-gray-100 rounded-lg p-3 text-sm">
                    <p class="text-gray-700">您好！我是您的 AI 理財顧問，可以協助您：</p>
                    <ul class="mt-2 space-y-1 text-gray-600 text-xs">
                        <li>• 解答測評相關問題</li>
                        <li>• 說明產品推薦理由</li>
                        <li>• 提供理財規劃建議</li>
                        <li>• 協助選擇適合產品</li>
                    </ul>
                </div>
            </div>

            <!-- 輸入區域 -->
            <div class="p-4 border-t border-gray-200">
                <div class="flex space-x-2">
                    <input type="text" id="chatInput" placeholder="輸入您的問題..." class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-paris-blue focus:border-transparent text-sm">
                    <button onclick="sendMessage()" class="gradient-bg text-white px-4 py-2 rounded-lg hover:opacity-90 transition">
                        發送
                    </button>
                </div>
            </div>
        </aside>
    </div>

    <script>
        // 問卷題目資料庫
        const questions = [
            // 風險偏好 (8題)
            { section: '風險偏好評估', question: '如果有一筆 10 萬元的資金，您會選擇如何運用？', options: ['存在銀行定存，確保本金安全', '購買穩健的債券基金，追求穩定收益', '投資股票或基金，追求較高報酬', '投資高風險高報酬的金融商品'] },
            { section: '風險偏好評估', question: '假設您的投資在一年內虧損了 20%，您會如何反應？', options: ['立刻全部贖回，停止投資', '減少投資金額，降低風險', '維持原投資策略不變', '加碼投資，認為是買入好時機'] },
            { section: '風險偏好評估', question: '您能夠承受投資組合在一年內的最大虧損是多少？', options: ['0%，我不能承受任何虧損', '5% 以內', '10-20%', '20% 以上'] },
            { section: '風險偏好評估', question: '面對市場波動時，您通常的心態是？', options: ['非常焦慮，經常查看投資狀況', '有些擔心，但還能保持冷靜', '偶爾關注，不會特別在意', '完全不受影響，相信長期投資'] },
            { section: '風險偏好評估', question: '您認為投資最重要的是？', options: ['保本，絕不虧損', '穩定收益，風險可控', '平衡風險與報酬', '高報酬，可承擔高風險'] },
            { section: '風險偏好評估', question: '假設有兩個投資選項，您會選擇哪一個？', options: ['年報酬 2%，幾乎無風險', '年報酬 5%，風險中等', '年報酬 8%，風險較高', '年報酬 12%，風險很高'] },
            { section: '風險偏好評估', question: '您的投資經驗是？', options: ['完全沒有，這是第一次', '有一些，但不太熟悉', '有相當經驗，能獨立決策', '非常豐富，是投資老手'] },
            { section: '風險偏好評估', question: '您希望透過投資達成的目標是？', options: ['保值，對抗通膨', '穩定增值，累積財富', '快速增值，提早退休', '追求最大報酬'] },
            
            // 理財目標 (6題)
            { section: '理財目標分析', question: '您目前最重要的理財目標是？（可複選）', options: ['退休規劃', '子女教育', '購屋置產', '財富增值'], multiple: true },
            { section: '理財目標分析', question: '您預計多久後需要用到這筆投資資金？', options: ['1 年內', '1-3 年', '3-5 年', '5 年以上'] },
            { section: '理財目標分析', question: '您目前的年齡區間是？', options: ['25 歲以下', '25-35 歲', '35-50 歲', '50 歲以上'] },
            { section: '理財目標分析', question: '您的家庭狀況是？', options: ['單身，無子女', '已婚，無子女', '已婚，有子女', '其他'] },
            { section: '理財目標分析', question: '您預計退休的年齡是？', options: ['50 歲以前', '50-55 歲', '55-60 歲', '60 歲以後'] },
            { section: '理財目標分析', question: '您每月可用於投資理財的金額約為？', options: ['1 萬以下', '1-3 萬', '3-5 萬', '5 萬以上'] },
            
            // 投資經驗 (5題)
            { section: '投資經驗調查', question: '您是否持有股票或基金？', options: ['從未持有', '曾經持有，但已全部賣出', '目前持有，金額不多', '目前持有相當金額'] },
            { section: '投資經驗調查', question: '您對以下哪些金融商品較為熟悉？（可複選）', options: ['定存、儲蓄險', '債券、債券基金', '股票、股票基金', '外匯、期貨、選擇權'], multiple: true },
            { section: '投資經驗調查', question: '您通常透過什麼管道獲取投資資訊？', options: ['朋友推薦', '銀行理專建議', '自行研究分析', '專業投資顧問'] },
            { section: '投資經驗調查', question: '您是否了解投資型保險的運作方式？', options: ['完全不了解', '聽過但不太清楚', '有一定了解', '非常了解'] },
            { section: '投資經驗調查', question: '您做投資決策時，最重視的資訊是？', options: ['親友經驗分享', '專家意見', '歷史績效數據', '風險評估報告'] },
            
            // 人格特質 (6題)
            { section: '人格特質測試', question: '面對複雜的決策時，您傾向於？', options: ['依靠直覺和感覺', '仔細分析所有數據', '聽取他人建議後決定', '快速決策，邊做邊調整'] },
            { section: '人格特質測試', question: '在團隊合作中，您通常扮演的角色是？', options: ['領導者，喜歡主導', '協調者，促進溝通', '執行者，完成任務', '觀察者，提供建議'] },
            { section: '人格特質測試', question: '您更喜歡哪種工作方式？', options: ['按部就班，遵循規則', '靈活變通，隨機應變', '創新突破，挑戰常規', '穩定可預測'] },
            { section: '人格特質測試', question: '面對風險時，您的態度是？', options: ['極度謹慎，盡量避免', '謹慎評估後才行動', '勇於嘗試，從中學習', '喜歡冒險，追求刺激'] },
            { section: '人格特質測試', question: '您做決定時更注重？', options: ['情感和人際關係', '邏輯和理性分析', '長期目標和願景', '當下的實際效益'] },
            { section: '人格特質測試', question: '您認為自己是一個怎樣的人？', options: ['務實保守，喜歡確定性', '理性分析，重視數據', '積極進取，勇於挑戰', '情感豐富，重視關係'] },
            
            // 溝通偏好 (5題)
            { section: '溝通偏好分析', question: '您更喜歡接收什麼樣的資訊？', options: ['詳細的文字說明', '清楚的數據圖表', '生動的故事案例', '簡潔的重點摘要'] },
            { section: '溝通偏好分析', question: '業務人員向您介紹產品時，您希望他如何說明？', options: ['用實際案例說明', '提供詳細數據分析', '強調情感價值', '直接講重點和優勢'] },
            { section: '溝通偏好分析', question: '您更傾向於哪種學習方式？', options: ['閱讀文字資料', '觀看圖表和影片', '聽取專家講解', '實際操作體驗'] },
            { section: '溝通偏好分析', question: '收到產品推薦訊息時，您希望？', options: ['每週定期收到', '有重要產品時才通知', '根據我的需求客製化推送', '不要主動推送'] },
            { section: '溝通偏好分析', question: '您喜歡的溝通方式是？', options: ['面對面詳談', '電話討論', 'LINE 文字訊息', 'Email 書面資料'] }
        ];

        let currentQuestion = 0;
        let answers = [];
        let currentView = 'welcome'; // welcome, assessment, result

        // 開始測評
        function startAssessment() {
            currentView = 'assessment';
            currentQuestion = 0;
            answers = [];
            
            document.getElementById('welcomeView').style.display = 'none';
            document.getElementById('assessmentView').style.display = 'block';
            document.getElementById('resultView').style.display = 'none';
            
            // 更新側邊欄狀態
            document.getElementById('assessmentStatus').innerHTML = `
                <h3 class="text-sm font-semibold text-blue-900 mb-2 flex items-center">
                    <svg class="w-4 h-4 mr-2 pulse-dot" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                    </svg>
                    測評進行中
                </h3>
                <p class="text-xs text-blue-800">已完成 ${currentQuestion} / 30 題</p>
            `;
            
            renderQuestion();
        }

        // 渲染問題
        function renderQuestion() {
            const q = questions[currentQuestion];
            const questionCard = document.getElementById('questionCard');
            
            // 更新標題和進度
            document.getElementById('sectionTitle').textContent = q.section;
            document.getElementById('progressText').textContent = `第 ${currentQuestion + 1} 題，共 30 題`;
            const progress = ((currentQuestion + 1) / 30 * 100).toFixed(0);
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressPercent').textContent = progress;
            
            // 生成問題內容
            let optionsHTML = '';
            q.options.forEach((option, index) => {
                optionsHTML += `
                    <div class="option-card border-2 border-gray-200 rounded-lg p-4 hover:border-paris-blue transition" onclick="selectOption(${index}, ${q.multiple || false})">
                        <div class="flex items-center">
                            <div class="w-6 h-6 border-2 border-gray-300 rounded-full mr-3 flex items-center justify-center option-indicator">
                                <div class="w-3 h-3 bg-paris-blue rounded-full" style="display: none;"></div>
                            </div>
                            <span class="text-gray-800">${option}</span>
                        </div>
                    </div>
                `;
            });
            
            questionCard.innerHTML = `
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">問題 ${currentQuestion + 1}</h2>
                    <p class="text-gray-600">${q.question}</p>
                    ${q.multiple ? '<p class="text-sm text-blue-600 mt-2">* 此題可複選</p>' : ''}
                </div>
                <div class="space-y-3">
                    ${optionsHTML}
                </div>
            `;
            
            // 更新按鈕狀態
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = true;
            document.getElementById('nextBtn').textContent = currentQuestion === 29 ? '完成測評' : '下一題';
        }

        // 選擇選項
        function selectOption(index, isMultiple) {
            const options = document.querySelectorAll('.option-card');
            
            if (!isMultiple) {
                // 單選：清除所有選擇
                options.forEach(opt => {
                    opt.classList.remove('selected');
                    opt.querySelector('.option-indicator div').style.display = 'none';
                });
                
                // 選中當前
                options[index].classList.add('selected');
                options[index].querySelector('.option-indicator div').style.display = 'block';
                
                answers[currentQuestion] = [index];
            } else {
                // 複選
                if (options[index].classList.contains('selected')) {
                    options[index].classList.remove('selected');
                    options[index].querySelector('.option-indicator div').style.display = 'none';
                    answers[currentQuestion] = answers[currentQuestion].filter(i => i !== index);
                } else {
                    options[index].classList.add('selected');
                    options[index].querySelector('.option-indicator div').style.display = 'block';
                    if (!answers[currentQuestion]) answers[currentQuestion] = [];
                    answers[currentQuestion].push(index);
                }
            }
            
            // 啟用下一題按鈕
            document.getElementById('nextBtn').disabled = !answers[currentQuestion] || answers[currentQuestion].length === 0;
        }

        // 下一題
        function nextQuestion() {
            if (currentQuestion === 29) {
                // 完成測評
                showResult();
            } else {
                currentQuestion++;
                renderQuestion();
                
                // 更新側邊欄進度
                document.getElementById('assessmentStatus').innerHTML = `
                    <h3 class="text-sm font-semibold text-blue-900 mb-2 flex items-center">
                        <svg class="w-4 h-4 mr-2 pulse-dot" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                        </svg>
                        測評進行中
                    </h3>
                    <p class="text-xs text-blue-800">已完成 ${currentQuestion + 1} / 30 題</p>
                `;
            }
        }

        // 上一題
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
                
                // 如果有之前的答案，恢復選擇
                if (answers[currentQuestion]) {
                    const options = document.querySelectorAll('.option-card');
                    answers[currentQuestion].forEach(index => {
                        options[index].classList.add('selected');
                        options[index].querySelector('.option-indicator div').style.display = 'block';
                    });
                    document.getElementById('nextBtn').disabled = false;
                }
            }
        }

        // 顯示結果
        function showResult() {
            currentView = 'result';
            document.getElementById('assessmentView').style.display = 'none';
            document.getElementById('resultView').style.display = 'block';
            
            // 更新側邊欄狀態
            document.getElementById('assessmentStatus').innerHTML = `
                <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                    <h3 class="text-sm font-semibold text-green-900 mb-2 flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        測評已完成
                    </h3>
                    <p class="text-xs text-green-800 mb-2">結果已生成</p>
                    <button onclick="retakeAssessment()" class="w-full bg-green-500 text-white py-2 rounded text-xs hover:bg-green-600 transition">
                        重新測評
                    </button>
                </div>
            `;
        }

        // 重新測評
        function retakeAssessment() {
            if (confirm('確定要重新測評嗎？目前的結果將會被覆蓋。')) {
                startAssessment();
            }
        }

        // 聯繫顧問
        function contactAdvisor() {
            alert('我們的專屬顧問將在 24 小時內與您聯繫！\n\n您也可以直接撥打客服專線：0800-000-000');
        }

        // AI 助手
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                const chatMessages = document.getElementById('chatMessages');
                
                // 用戶訊息
                const userMessage = document.createElement('div');
                userMessage.className = 'bg-paris-blue text-white rounded-lg p-3 text-sm ml-auto max-w-[80%]';
                userMessage.textContent = message;
                chatMessages.appendChild(userMessage);
                
                // 清空輸入
                input.value = '';
                
                // 模擬 AI 回應
                setTimeout(() => {
                    const aiMessage = document.createElement('div');
                    aiMessage.className = 'bg-gray-100 rounded-lg p-3 text-sm';
                    aiMessage.innerHTML = '<p class="text-gray-700">感謝您的提問！根據您的測評結果，我建議...</p>';
                    chatMessages.appendChild(aiMessage);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
                
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }
    </script>
</body>
</html>